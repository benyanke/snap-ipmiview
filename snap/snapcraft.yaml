name: ipmiview # you probably want to 'snapcraft register <name>'
version: '0.0.1' # just for humans, typically '1.2+git' or '1.3.2'
summary: SuperMicro's IPMIView tool
description: |
  IPMIView is a GUI-based software application that allows administrators 
  to manage multiple target systems through BMC. IPMIView V2.0 supports 
  Supermicroâ€™s BMCs that adheres to either IPMI v1.5 or v2.0.

  IPMIView monitors and reports on the status of a SuperBlade(r) 
  system, including the blade server, power supply, gigabit switch, 
  InfiniBand and CMM modules. IPMIView also supports remote KVM and 
  Virtual Media.

grade: devel # must be 'stable' to release into candidate/stable channels
confinement: devmode # use 'strict' once you have the right plugs and slots
# architectures: [ x86 ]
# base: 

apps:
  #ipmiview:
  #  command: hello

  ipmiview:
    command: bin/IPMIView20
    # desktop: share/applications/htmldoc.desktop
    plugs:
      #- network
      #- home
      #- x11
      - cups-control
      - desktop
      - desktop-legacy
      - gsettings
      - home
      - network
      - opengl
      - removable-media
      - unity7
      - wayland
      - x11


parts:
  ipmiview-extract:
    plugin: nil
    install: |
      mkdir -p $SNAPCRAFT_PART_INSTALL/bin
      # find
      tar -xvf ipmi-view.tar.gz
      # pwd
      # ls ./IPMIView_2.14.0_build.180213_bundleJRE_Linux_x64/
      env | grep SNAP
      rsync -avP ./IPMIView_2.14.0_build.180213_bundleJRE_Linux_x64/* $SNAPCRAFT_PART_INSTALL/bin/
      echo "BINDIR:"
      echo "BINDIR:"
      echo "BINDIR:"
      echo "BINDIR:"
      echo "BINDIR:"
      ls $SNAPCRAFT_PART_INSTALL/bin/
      # /home/benyanke/git/snap-ipmiview/parts/ipmiview-extract/build/IPMIView_2.14.0_build.180213_bundleJRE_Linux_x64/JViewerX9
      # find
      # cp mac-spoofer.sh $SNAPCRAFT_PART_INSTALL/bin/

#  ipmiview-extract:
#    plugin: dump
    # 
#    override-build: |
#      wget ftp://ftp.supermicro.com/utility/IPMIView/Linux/IPMIView_2.14.0_build.180213_bundleJRE_Linux_x64.tar.gz -O $SNAPCRAFT_STAGE/ipmi.tar.gz || exit 1
#      tar -xvf $SNAPCRAFT_STAGE/ipmi.tar.gz || exit 1
#      rm -f $SNAPCRAFT_STAGE/ipmi.tar.gz
#      ls . $SNAPCRAFT_STAGE
